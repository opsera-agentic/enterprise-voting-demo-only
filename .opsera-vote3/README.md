# vote3 - Opsera Code-to-Cloud Enterprise

Generated by Opsera Code-to-Cloud Enterprise v0.905

## Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          vote3 - 3 Microservices                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────┐        ┌─────────────┐        ┌──────────────┐                │
│  │  Vote   │───────▶│    Redis    │◀───────│   Worker     │                │
│  │ (Python)│        │ ElastiCache │        │   (.NET)     │                │
│  └─────────┘        └─────────────┘        └──────┬───────┘                │
│       │                                           │                        │
│       │              ┌─────────────┐              │                        │
│       │              │  PostgreSQL │◀─────────────┘                        │
│       │              │     RDS     │                                       │
│       │              └──────┬──────┘                                       │
│       │                     │                                              │
│       │              ┌──────┴──────┐                                       │
│       └─────────────▶│   Result    │                                       │
│                      │  (Node.js)  │                                       │
│                      └─────────────┘                                       │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Environments

| Environment | Strategy | URL (Vote) | URL (Result) |
|-------------|----------|------------|--------------|
| DEV | Rolling | https://vote-vote3-dev.agent.opsera.dev | https://result-vote3-dev.agent.opsera.dev |
| QA | Canary | https://vote-vote3-qa.agent.opsera.dev | https://result-vote3-qa.agent.opsera.dev |
| Staging | Blue-Green | https://vote-vote3-staging.agent.opsera.dev | https://result-vote3-staging.agent.opsera.dev |

## Quick Start

### 1. Bootstrap Infrastructure

```bash
gh workflow run "00-bootstrap-infrastructure-vote3.yaml" -f environment=all -f action=apply
```

### 2. Deploy to DEV (auto-triggers on push)

```bash
git push origin main
# Or manually:
gh workflow run "ci-build-push-vote3-dev.yaml"
```

### 3. Promote to QA

```bash
gh workflow run "promote-vote3.yaml" -f target_environment=qa -f image_tag=<TAG> -f confirm=true
```

### 4. Promote to Staging

```bash
gh workflow run "promote-vote3.yaml" -f target_environment=staging -f image_tag=<TAG> -f confirm=true
```

## Workflows

| Workflow | Purpose | Trigger |
|----------|---------|---------|
| `00-bootstrap-infrastructure-vote3.yaml` | Provision ECR, RDS, Redis, IRSA | Manual |
| `ci-build-push-vote3-dev.yaml` | Build & deploy to DEV | Push to main |
| `ci-build-push-vote3-qa.yaml` | Deploy to QA (Canary) | Manual / Auto-promote |
| `ci-build-push-vote3-staging.yaml` | Deploy to Staging (Blue-Green) | Manual |
| `promote-vote3.yaml` | Manual promotion with approval | Manual |
| `diagnostics-vote3.yaml` | Troubleshooting & debugging | Manual |
| `deployment-landscape-vote3.yaml` | Dashboard report | Scheduled / Manual |
| `add-environment-vote3.yaml` | Create new environment | Manual |
| `delete-environment-vote3.yaml` | Delete environment | Manual |

## Required Secrets

| Secret | Description |
|--------|-------------|
| `AWS_ACCESS_KEY_ID` | AWS credentials |
| `AWS_SECRET_ACCESS_KEY` | AWS credentials |
| `AWS_ACCOUNT_ID` | AWS account ID |
| `GH_PAT` | GitHub Personal Access Token |
| `SONAR_TOKEN` | SonarQube token |
| `SONAR_HOST_URL` | SonarQube URL |
| `SLACK_WEBHOOK_URL` | Slack webhook |
| `JIRA_API_TOKEN` | Jira API token |
| `JIRA_EMAIL` | Jira email |
| `JIRA_BASE_URL` | Jira URL |

## File Structure

```
.opsera-vote3/
├── argocd/
│   ├── dev/application.yaml
│   ├── qa/application.yaml
│   └── staging/application.yaml
├── Dockerfiles/
│   ├── Dockerfile.vote
│   ├── Dockerfile.result
│   └── Dockerfile.worker
├── k8s/
│   ├── base/
│   │   ├── configmap.yaml
│   │   ├── ingress.yaml
│   │   ├── kustomization.yaml
│   │   ├── namespace.yaml
│   │   ├── result-deployment.yaml
│   │   ├── result-service.yaml
│   │   ├── serviceaccounts.yaml
│   │   ├── vote-deployment.yaml
│   │   ├── vote-service.yaml
│   │   └── worker-deployment.yaml
│   └── overlays/
│       ├── dev/
│       ├── qa/
│       └── staging/
├── terraform/
│   ├── main.tf
│   ├── variables.tf
│   ├── outputs.tf
│   ├── dev.tfvars
│   ├── qa.tfvars
│   └── staging.tfvars
├── skill-manifest.yaml
└── README.md
```

---
_Generated by Opsera Code-to-Cloud Enterprise v0.905_
