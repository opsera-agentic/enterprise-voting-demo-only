# Skill Manifest - Generated by Opsera Code-to-Cloud Enterprise v0.905
# This file tracks the skill version used to generate this deployment

skill:
  name: code-to-cloud-enterprise
  version: "0.905"
  generated_at: "2026-02-02T00:00:00Z"

configuration:
  app_name: vote3
  environments:
    - dev
    - qa
    - staging
  cloud_provider: aws
  region: us-west-2
  tenant: opsera
  setup_mode: custom

security:
  authentication:
    github_actions: access_keys
    database: IAM_AUTH
    pods: IRSA
  scanning:
    gitleaks: warn
    grype: warn
    sonarqube: non-blocking

deployment:
  strategies:
    dev: rolling
    qa: canary
    staging: blue-green
  auto_promotion:
    dev_to_qa: true
    qa_to_staging: false
  services:
    - name: vote
      port: 80
      runtime: python
      health_check: /
    - name: result
      port: 80
      runtime: nodejs
      health_check: /
    - name: worker
      port: none
      runtime: dotnet

infrastructure:
  hub_cluster: argocd-usw2
  spoke_cluster: opsera-usw2-np
  namespaces:
    dev: vote3-dev
    qa: vote3-qa
    staging: vote3-staging

databases:
  postgresql:
    type: rds
    instance_class: db.t3.micro
    engine_version: "16.6"
    iam_authentication: true
  redis:
    type: elasticache
    node_type: cache.t3.micro
    engine_version: "7.0"

integrations:
  slack:
    enabled: true
    notify_on: failure
  jira:
    enabled: true
    notify_on: failure
  sonarqube:
    enabled: true
    mode: non-blocking

endpoints:
  dev:
    vote: https://vote-vote3-dev.agent.opsera.dev
    result: https://result-vote3-dev.agent.opsera.dev
  qa:
    vote: https://vote-vote3-qa.agent.opsera.dev
    result: https://result-vote3-qa.agent.opsera.dev
  staging:
    vote: https://vote-vote3-staging.agent.opsera.dev
    result: https://result-vote3-staging.agent.opsera.dev

generated_files:
  terraform:
    - terraform/main.tf
    - terraform/variables.tf
    - terraform/outputs.tf
    - terraform/dev.tfvars
    - terraform/qa.tfvars
    - terraform/staging.tfvars
  kubernetes:
    - k8s/base/namespace.yaml
    - k8s/base/configmap.yaml
    - k8s/base/serviceaccounts.yaml
    - k8s/base/vote-deployment.yaml
    - k8s/base/vote-service.yaml
    - k8s/base/result-deployment.yaml
    - k8s/base/result-service.yaml
    - k8s/base/worker-deployment.yaml
    - k8s/base/ingress.yaml
    - k8s/base/kustomization.yaml
    - k8s/overlays/dev/kustomization.yaml
    - k8s/overlays/qa/kustomization.yaml
    - k8s/overlays/qa/canary-rollout.yaml
    - k8s/overlays/staging/kustomization.yaml
    - k8s/overlays/staging/blue-green-rollout.yaml
  argocd:
    - argocd/dev/application.yaml
    - argocd/qa/application.yaml
    - argocd/staging/application.yaml
  workflows:
    - .github/workflows/00-bootstrap-infrastructure-vote3.yaml
    - .github/workflows/ci-build-push-vote3-dev.yaml
    - .github/workflows/ci-build-push-vote3-qa.yaml
    - .github/workflows/ci-build-push-vote3-staging.yaml
    - .github/workflows/promote-vote3.yaml
    - .github/workflows/diagnostics-vote3.yaml
    - .github/workflows/deployment-landscape-vote3.yaml
    - .github/workflows/add-environment-vote3.yaml
    - .github/workflows/delete-environment-vote3.yaml
  dockerfiles:
    - Dockerfiles/Dockerfile.vote
    - Dockerfiles/Dockerfile.result
    - Dockerfiles/Dockerfile.worker

required_secrets:
  aws:
    - AWS_ACCESS_KEY_ID
    - AWS_SECRET_ACCESS_KEY
    - AWS_ACCOUNT_ID
  github:
    - GH_PAT
  integrations:
    - SONAR_TOKEN
    - SONAR_HOST_URL
    - SLACK_WEBHOOK_URL
    - JIRA_API_TOKEN
    - JIRA_EMAIL
    - JIRA_BASE_URL
